(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),s=n(15),c=n.n(s),o=n(3),u=function(e){return Object(r.jsxs)("form",{children:[Object(r.jsx)("label",{htmlFor:"filterName",children:"Search: "}),Object(r.jsx)("input",{id:"filterName",value:e.value,onChange:function(t){e.filterFunction(t.target.value)}})]})},i=n(6),m=n(4),d=n.n(m),b="/api/persons",f={getAll:function(){return d.a.get(b).then((function(e){return e.data}))},create:function(e){return d.a.post(b,e).then((function(e){return e.data}))},remove:function(e){return d.a.delete("".concat(b,"/").concat(e))},update:function(e){return d.a.put("".concat(b,"/").concat(e.id),e).then((function(e){return e.data}))}},j=function(e){return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n={name:e.name,number:e.number};if(e.persons.some((function(t){return t.name===e.name}))){if(window.confirm("".concat(e.name," is already added to phonebook, replace the old number with a new one?"))){var r=e.persons.find((function(t){return t.name===e.name})),a=Object(i.a)(Object(i.a)({},r),{},{number:e.number});f.update(a).then((function(t){e.addPerson(e.persons.map((function(e){return e.id!==t.id?e:t}))),e.nameSetter(""),e.numberSetter(""),e.setMessage("Updated ".concat(t.name)),e.error(!1),setTimeout((function(){return e.setMessage("")}),5e3)})).catch((function(t){e.error(!0),e.setMessage(t.response.data.error),setTimeout((function(){return e.setMessage("")}),5e3)}))}}else f.create(n).then((function(t){e.addPerson(e.persons.concat(t)),e.nameSetter(""),e.numberSetter(""),e.error(!1),e.setMessage("Added ".concat(t.name)),setTimeout((function(){return e.setMessage("")}),5e3)})).catch((function(t){e.error(!0),e.setMessage(t.response.data.error),setTimeout((function(){return e.setMessage("")}),5e3)}))},children:[Object(r.jsxs)("div",{children:["name:"," ",Object(r.jsx)("input",{value:e.name,onChange:function(t){e.nameSetter(t.target.value)}})]}),Object(r.jsxs)("div",{children:["number:"," ",Object(r.jsx)("input",{value:e.number,onChange:function(t){e.numberSetter(t.target.value)}})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})})},l=function(e){var t=e.filterName?e.persons.filter((function(t){return t.name.toLowerCase().includes(e.filterName.toLowerCase())})):e.persons;return Object(r.jsx)("div",{children:t.map((function(t){return Object(r.jsxs)("p",{children:[t.name," ",t.number," ",Object(r.jsx)("button",{onClick:function(){return n=t,void(window.confirm("Delete ".concat(n.name))&&f.remove(n.id).then((function(){e.changePersons(e.persons.filter((function(e){return e.id!==n.id}))),e.error(!1),e.setMessage("Removed ".concat(n.name)),setTimeout((function(){return e.setMessage("")}),5e3)})).catch((function(t){f.getAll().then((function(t){e.changePersons(t)})),e.error(!0),e.setMessage("Information of ".concat(n.name," has already been removed from server")),setTimeout((function(){return e.setMessage("")}),5e3)})));var n},children:"delete"},t.name)]},t.name)}))})},h=(n(38),function(e){var t=e.error,n=e.message;return""===n?null:Object(r.jsx)("div",{className:t?"error":"message",children:n})}),O=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(""),i=Object(o.a)(c,2),m=i[0],d=i[1],b=Object(a.useState)(""),O=Object(o.a)(b,2),g=O[0],p=O[1],v=Object(a.useState)(""),x=Object(o.a)(v,2),S=x[0],M=x[1],w=Object(a.useState)(""),k=Object(o.a)(w,2),N=k[0],P=k[1],C=Object(a.useState)(!1),T=Object(o.a)(C,2),A=T[0],y=T[1];return Object(a.useEffect)((function(){f.getAll().then((function(e){s(e)})).catch((function(e){return console.log(e)}))}),[]),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(h,{error:A,message:N}),Object(r.jsx)(u,{value:S,filterFunction:M}),Object(r.jsx)("h3",{children:"Add a new"}),Object(r.jsx)(j,{persons:n,addPerson:s,name:m,nameSetter:d,number:g,numberSetter:p,message:N,setMessage:P,errorValue:A,error:y}),Object(r.jsx)("h3",{children:"Numbers"}),Object(r.jsx)(l,{persons:n,changePersons:s,filterName:S,message:N,setMessage:P,errorValue:A,error:y})]})};c.a.render(Object(r.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.8f5693a7.chunk.js.map